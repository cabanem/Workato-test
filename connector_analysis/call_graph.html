<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Connector Call Graph</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;margin:0;background:#fafafa}
    header{padding:16px 20px;border-bottom:1px solid #e5e7eb;background:#fff;position:sticky;top:0}
    main{padding:16px}
    pre.mermaid{background:#fff;border:1px solid #e5e7eb;border-radius:12px;padding:16px;overflow:auto}
    .legend{display:flex;gap:8px;align-items:center;margin:12px 0 20px}
    .chip{border-radius:10px;padding:2px 8px;border:1px solid #e5e7eb}
    .chip.action{background:#E3F2FD;border-color:#1E88E5}
    .chip.method{background:#E8F5E9;border-color:#2E7D32}
    .chip.http{background:#FFF3E0;border-color:#EF6C00}
  </style>
  <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
  <script>mermaid.initialize({ startOnLoad: true, securityLevel: 'loose', theme: 'default' });</script>
</head>
<body>
  <header><h1 style="margin:0;font-size:18px">Connector Call Graph</h1></header>
  <main>
    <div class="legend">
      <span class="chip action">Action entrypoint</span>
      <span class="chip method">Method</span>
      <span class="chip http">Direct HTTP</span>
    </div>
    <pre class="mermaid">flowchart TD
  execute_send_messages([execute:send_messages])
  run_vertex[run_vertex]
  execute_translate_text([execute:translate_text])
  execute_summarize_text([execute:summarize_text])
  execute_parse_text([execute:parse_text])
  execute_draft_email([execute:draft_email])
  execute_ai_classify([execute:ai_classify])
  execute_analyze_text([execute:analyze_text])
  execute_analyze_image([execute:analyze_image])
  execute_generate_embeddings([execute:generate_embeddings])
  generate_embeddings_batch_exec[generate_embeddings_batch_exec]
  execute_generate_embedding_single([execute:generate_embedding_single])
  generate_embedding_single_exec[generate_embedding_single_exec]
  execute_find_neighbors([execute:find_neighbors])
  vindex_find_neighbors[vindex_find_neighbors]
  transform_find_neighbors_response[transform_find_neighbors_response]
  execute_upsert_index_datapoints([execute:upsert_index_datapoints])
  batch_upsert_datapoints[batch_upsert_datapoints]
  execute_test_connection([execute:test_connection])
  init_test_results[init_test_results]
  run_service_test[run_service_test]
  execute_get_prediction([execute:get_prediction])
  HTTP_POST{{HTTP:POST}}
  execute_fetch_drive_file([execute:fetch_drive_file])
  extract_drive_file_id[extract_drive_file_id]
  fetch_drive_file_full[fetch_drive_file_full]
  execute_list_drive_files([execute:list_drive_files])
  build_drive_query[build_drive_query]
  with_resilience[with_resilience]
  api_request[api_request]
  drive_api_url[drive_api_url]
  handle_drive_error[handle_drive_error]
  execute_batch_fetch_drive_files([execute:batch_fetch_drive_files])
  execute_monitor_drive_changes([execute:monitor_drive_changes])
  gen_correlation_id[gen_correlation_id]
  rate_limit_defaults[rate_limit_defaults]
  enforce_vertex_rate_limits[enforce_vertex_rate_limits]
  circuit_breaker_retry[circuit_breaker_retry]
  HTTP_DELETE{{HTTP:DELETE}}
  vindex_url[vindex_url]
  normalize_host[normalize_host]
  build_ai_payload[build_ai_payload]
  handle_vertex_error[handle_vertex_error]
  log_debug[log_debug]
  oauth_scopes[oauth_scopes]
  vertex_rpm_limits[vertex_rpm_limits]
  neighbors_max_distance[neighbors_max_distance]
  to_similarity[to_similarity]
  maybe_parse_json[maybe_parse_json]
  strip_fences[strip_fences]
  escape_triple_backticks[escape_triple_backticks]
  project_region_path[project_region_path]
  vertex_host[vertex_host]
  vertex_base_url[vertex_base_url]
  vertex_api_url[vertex_api_url]
  HTTP_GET{{HTTP:GET}}
  HTTP_PUT{{HTTP:PUT}}
  vertex_request[vertex_request]
  drive_request[drive_request]
  extract_http_status[extract_http_status]
  is_rate_limit_error[is_rate_limit_error]
  extract_retry_after[extract_retry_after]
  calculate_retry_delay[calculate_retry_delay]
  handle_429_with_backoff[handle_429_with_backoff]
  get_circuit_state[get_circuit_state]
  update_circuit_state[update_circuit_state]
  should_open_circuit[should_open_circuit]
  check_circuit_status[check_circuit_status]
  should_retry_error[should_retry_error]
  calculate_backoff_delay[calculate_backoff_delay]
  handle_circuit_success[handle_circuit_success]
  handle_circuit_failure[handle_circuit_failure]
  vertex_model_bucket[vertex_model_bucket]
  sort_model_options[sort_model_options]
  to_model_options[to_model_options]
  create_model_label[create_model_label]
  cascade_model_discovery[cascade_model_discovery]
  fetch_fresh_publisher_models[fetch_fresh_publisher_models]
  get_static_model_list[get_static_model_list]
  fetch_publisher_models[fetch_publisher_models]
  validate_publisher_model_[validate_publisher_model!]
  error_handler[error_handler]
  dynamic_model_picklist[dynamic_model_picklist]
  picklist_for[picklist_for]
  static_model_options[static_model_options]
  build_base_payload[build_base_payload]
  json_only_instruction[json_only_instruction]
  build_conversation_payload[build_conversation_payload]
  build_message_parts[build_message_parts]
  get_ai_template[get_ai_template]
  process_ai_template[process_ai_template]
  build_classify_payload[build_classify_payload]
  payload_for_analyze_image[payload_for_analyze_image]
  build_image_payload[build_image_payload]
  build_embedding_payload[build_embedding_payload]
  payload_for_text_embedding[payload_for_text_embedding]
  build_neighbors_payload[build_neighbors_payload]
  payload_for_find_neighbors[payload_for_find_neighbors]
  vertex_url_for[vertex_url_for]
  extract_response[extract_response]
  extract_embedding_values[extract_embedding_values]
  usage_meta[usage_meta]
  extract_json[extract_json]
  get_safety_ratings[get_safety_ratings]
  check_finish_reason[check_finish_reason]
  standard_error_response[standard_error_response]
  drive_basic_fields[drive_basic_fields]
  get_export_mime_type[get_export_mime_type]
  classify_drive_change[classify_drive_change]
  fetch_file_content[fetch_file_content]
  probe_vertex_ai[probe_vertex_ai]
  probe_drive[probe_drive]
  validate_index_access[validate_index_access]
  validate_datapoint[validate_datapoint]
  format_datapoint[format_datapoint]
  format_restricts[format_restricts]
  build_upsert_payload[build_upsert_payload]
  handle_upsert_error[handle_upsert_error]
  process_datapoint_batch[process_datapoint_batch]
  build_embedding_instance[build_embedding_instance]
  process_embedding_prediction[process_embedding_prediction]
  estimate_token_count[estimate_token_count]
  process_embedding_batch[process_embedding_batch]
  should_stream_flush[should_stream_flush]
  sample_record_output[sample_record_output]
  safety_ratings_output_sample[safety_ratings_output_sample]
  usage_output_sample[usage_output_sample]
  format_parse_sample[format_parse_sample]
  top_test[top:test]
  execute_send_messages --> run_vertex
  execute_translate_text --> run_vertex
  execute_summarize_text --> run_vertex
  execute_parse_text --> run_vertex
  execute_draft_email --> run_vertex
  execute_ai_classify --> run_vertex
  execute_analyze_text --> run_vertex
  execute_analyze_image --> run_vertex
  execute_generate_embeddings --> generate_embeddings_batch_exec
  execute_generate_embedding_single --> generate_embedding_single_exec
  execute_find_neighbors --> vindex_find_neighbors
  execute_find_neighbors --> transform_find_neighbors_response
  execute_upsert_index_datapoints --> batch_upsert_datapoints
  execute_test_connection --> init_test_results
  execute_test_connection --> run_service_test
  execute_get_prediction --> HTTP_POST
  execute_fetch_drive_file --> extract_drive_file_id
  execute_fetch_drive_file --> fetch_drive_file_full
  execute_list_drive_files --> extract_drive_file_id
  execute_list_drive_files --> build_drive_query
  execute_list_drive_files --> with_resilience
  execute_list_drive_files --> api_request
  execute_list_drive_files --> drive_api_url
  execute_list_drive_files --> handle_drive_error
  execute_batch_fetch_drive_files --> extract_drive_file_id
  execute_batch_fetch_drive_files --> fetch_drive_file_full
  execute_monitor_drive_changes --> extract_drive_file_id
  execute_monitor_drive_changes --> with_resilience
  execute_monitor_drive_changes --> api_request
  execute_monitor_drive_changes --> drive_api_url
  execute_monitor_drive_changes --> handle_drive_error
  with_resilience --> rate_limit_defaults
  with_resilience --> enforce_vertex_rate_limits
  with_resilience --> gen_correlation_id
  with_resilience --> circuit_breaker_retry
  with_resilience --> HTTP_DELETE
  vindex_url --> normalize_host
  vindex_find_neighbors --> vindex_url
  vindex_find_neighbors --> build_ai_payload
  vindex_find_neighbors --> with_resilience
  vindex_find_neighbors --> api_request
  vindex_find_neighbors --> normalize_host
  vindex_find_neighbors --> handle_vertex_error
  to_similarity --> neighbors_max_distance
  vertex_base_url --> vertex_host
  vertex_api_url --> vertex_base_url
  api_request --> HTTP_GET
  api_request --> HTTP_POST
  api_request --> HTTP_PUT
  api_request --> HTTP_DELETE
  vertex_request --> vertex_api_url
  vertex_request --> with_resilience
  vertex_request --> api_request
  drive_request --> drive_api_url
  drive_request --> handle_drive_error
  drive_request --> with_resilience
  drive_request --> api_request
  drive_request --> HTTP_DELETE
  is_rate_limit_error --> extract_http_status
  calculate_retry_delay --> extract_retry_after
  handle_429_with_backoff --> rate_limit_defaults
  handle_429_with_backoff --> is_rate_limit_error
  handle_429_with_backoff --> calculate_retry_delay
  handle_429_with_backoff --> log_debug
  get_circuit_state --> HTTP_GET
  check_circuit_status --> log_debug
  should_retry_error --> extract_http_status
  handle_circuit_success --> update_circuit_state
  handle_circuit_success --> log_debug
  handle_circuit_failure --> should_open_circuit
  handle_circuit_failure --> log_debug
  circuit_breaker_retry --> rate_limit_defaults
  circuit_breaker_retry --> get_circuit_state
  circuit_breaker_retry --> check_circuit_status
  circuit_breaker_retry --> handle_circuit_success
  circuit_breaker_retry --> should_retry_error
  circuit_breaker_retry --> calculate_backoff_delay
  circuit_breaker_retry --> log_debug
  circuit_breaker_retry --> handle_circuit_failure
  to_model_options --> vertex_model_bucket
  cascade_model_discovery --> log_debug
  cascade_model_discovery --> fetch_fresh_publisher_models
  fetch_fresh_publisher_models --> with_resilience
  fetch_fresh_publisher_models --> api_request
  fetch_fresh_publisher_models --> log_debug
  fetch_publisher_models --> HTTP_GET
  validate_publisher_model_ --> HTTP_GET
  error_handler --> handle_vertex_error
  dynamic_model_picklist --> log_debug
  picklist_for --> dynamic_model_picklist
  get_ai_template --> escape_triple_backticks
  get_ai_template --> json_only_instruction
  process_ai_template --> build_base_payload
  build_ai_payload --> get_ai_template
  build_ai_payload --> process_ai_template
  build_classify_payload --> escape_triple_backticks
  build_image_payload --> payload_for_analyze_image
  build_embedding_payload --> payload_for_text_embedding
  build_neighbors_payload --> payload_for_find_neighbors
  vertex_url_for --> project_region_path
  run_vertex --> validate_publisher_model_
  run_vertex --> build_ai_payload
  run_vertex --> vertex_url_for
  run_vertex --> with_resilience
  run_vertex --> api_request
  run_vertex --> extract_response
  extract_json --> strip_fences
  extract_json --> log_debug
  extract_response --> check_finish_reason
  extract_response --> get_safety_ratings
  extract_response --> extract_json
  fetch_drive_file_full --> with_resilience
  fetch_drive_file_full --> api_request
  fetch_drive_file_full --> drive_api_url
  fetch_drive_file_full --> drive_basic_fields
  fetch_drive_file_full --> handle_drive_error
  fetch_drive_file_full --> fetch_file_content
  probe_vertex_ai --> with_resilience
  probe_vertex_ai --> api_request
  probe_vertex_ai --> project_region_path
  probe_drive --> with_resilience
  probe_drive --> api_request
  probe_drive --> drive_api_url
  probe_drive --> handle_drive_error
  transform_find_neighbors_response --> to_similarity
  transform_find_neighbors_response --> neighbors_max_distance
  format_datapoint --> validate_datapoint
  format_datapoint --> format_restricts
  build_upsert_payload --> format_datapoint
  handle_upsert_error --> handle_vertex_error
  process_datapoint_batch --> build_upsert_payload
  process_datapoint_batch --> with_resilience
  process_datapoint_batch --> api_request
  process_datapoint_batch --> handle_upsert_error
  batch_upsert_datapoints --> validate_index_access
  batch_upsert_datapoints --> process_datapoint_batch
  process_embedding_prediction --> extract_embedding_values
  process_embedding_batch --> build_embedding_instance
  process_embedding_batch --> with_resilience
  process_embedding_batch --> api_request
  process_embedding_batch --> handle_vertex_error
  generate_embeddings_batch_exec --> validate_publisher_model_
  generate_embeddings_batch_exec --> vertex_url_for
  generate_embeddings_batch_exec --> process_embedding_batch
  generate_embeddings_batch_exec --> process_embedding_prediction
  generate_embeddings_batch_exec --> estimate_token_count
  generate_embeddings_batch_exec --> should_stream_flush
  generate_embeddings_batch_exec --> log_debug
  generate_embedding_single_exec --> validate_publisher_model_
  sample_record_output --> safety_ratings_output_sample
  sample_record_output --> usage_output_sample
  format_parse_sample --> format_parse_sample
  top_test --> with_resilience
  top_test --> api_request
  top_test --> project_region_path
  top_test --> probe_drive
  classDef action fill:#E3F2FD,stroke:#1E88E5,stroke-width:1px;
  classDef method fill:#E8F5E9,stroke:#2E7D32,stroke-width:1px;
  classDef http   fill:#FFF3E0,stroke:#EF6C00,stroke-width:1px;
  classDef hot stroke:#6A1B9A,stroke-width:3px;
  classDef cycle stroke:#C62828,stroke-width:3px;
  classDef unused fill:#ECECEC,color:#6B7280,stroke:#9CA3AF;
  classDef undef stroke-dasharray:4 2,stroke:#EF4444;
  class execute_send_messages action;
  class execute_translate_text action;
  class execute_summarize_text action;
  class execute_parse_text action;
  class execute_draft_email action;
  class execute_ai_classify action;
  class execute_analyze_text action;
  class execute_analyze_image action;
  class execute_generate_embeddings action;
  class execute_generate_embedding_single action;
  class execute_find_neighbors action;
  class execute_upsert_index_datapoints action;
  class execute_test_connection action;
  class execute_get_prediction action;
  class execute_fetch_drive_file action;
  class execute_list_drive_files action;
  class execute_batch_fetch_drive_files action;
  class execute_monitor_drive_changes action;
  class run_vertex method;
  class generate_embeddings_batch_exec method;
  class generate_embedding_single_exec method;
  class vindex_find_neighbors method;
  class transform_find_neighbors_response method;
  class batch_upsert_datapoints method;
  class init_test_results method;
  class run_service_test method;
  class extract_drive_file_id method;
  class fetch_drive_file_full method;
  class build_drive_query method;
  class with_resilience method;
  class api_request method;
  class drive_api_url method;
  class handle_drive_error method;
  class gen_correlation_id method;
  class rate_limit_defaults method;
  class enforce_vertex_rate_limits method;
  class circuit_breaker_retry method;
  class vindex_url method;
  class normalize_host method;
  class build_ai_payload method;
  class handle_vertex_error method;
  class log_debug method;
  class oauth_scopes method;
  class vertex_rpm_limits method;
  class neighbors_max_distance method;
  class to_similarity method;
  class maybe_parse_json method;
  class strip_fences method;
  class escape_triple_backticks method;
  class project_region_path method;
  class vertex_host method;
  class vertex_base_url method;
  class vertex_api_url method;
  class vertex_request method;
  class drive_request method;
  class extract_http_status method;
  class is_rate_limit_error method;
  class extract_retry_after method;
  class calculate_retry_delay method;
  class handle_429_with_backoff method;
  class get_circuit_state method;
  class update_circuit_state method;
  class should_open_circuit method;
  class check_circuit_status method;
  class should_retry_error method;
  class calculate_backoff_delay method;
  class handle_circuit_success method;
  class handle_circuit_failure method;
  class vertex_model_bucket method;
  class sort_model_options method;
  class to_model_options method;
  class create_model_label method;
  class cascade_model_discovery method;
  class fetch_fresh_publisher_models method;
  class get_static_model_list method;
  class fetch_publisher_models method;
  class validate_publisher_model_ method;
  class error_handler method;
  class dynamic_model_picklist method;
  class picklist_for method;
  class static_model_options method;
  class build_base_payload method;
  class json_only_instruction method;
  class build_conversation_payload method;
  class build_message_parts method;
  class get_ai_template method;
  class process_ai_template method;
  class build_classify_payload method;
  class payload_for_analyze_image method;
  class build_image_payload method;
  class build_embedding_payload method;
  class payload_for_text_embedding method;
  class build_neighbors_payload method;
  class payload_for_find_neighbors method;
  class vertex_url_for method;
  class extract_response method;
  class extract_embedding_values method;
  class usage_meta method;
  class extract_json method;
  class get_safety_ratings method;
  class check_finish_reason method;
  class standard_error_response method;
  class drive_basic_fields method;
  class get_export_mime_type method;
  class classify_drive_change method;
  class fetch_file_content method;
  class probe_vertex_ai method;
  class probe_drive method;
  class validate_index_access method;
  class validate_datapoint method;
  class format_datapoint method;
  class format_restricts method;
  class build_upsert_payload method;
  class handle_upsert_error method;
  class process_datapoint_batch method;
  class build_embedding_instance method;
  class process_embedding_prediction method;
  class estimate_token_count method;
  class process_embedding_batch method;
  class should_stream_flush method;
  class sample_record_output method;
  class safety_ratings_output_sample method;
  class usage_output_sample method;
  class format_parse_sample method;
  class top_test method;
  class HTTP_POST http;
  class HTTP_DELETE http;
  class HTTP_GET http;
  class HTTP_PUT http;
  class run_vertex hot;
  class generate_embeddings_batch_exec hot;
  class vindex_find_neighbors hot;
  class init_test_results undef;
  class run_service_test undef;
  class fetch_drive_file_full hot;
  class execute_list_drive_files hot;
  class with_resilience hot;
  class api_request hot;
  class drive_api_url hot;
  class handle_drive_error hot;
  class execute_monitor_drive_changes hot;
  class circuit_breaker_retry hot;
  class log_debug hot;
  class oauth_scopes unused;
  class vertex_rpm_limits unused;
  class maybe_parse_json unused;
  class vertex_host unused;
  class vertex_base_url unused;
  class vertex_api_url unused;
  class vertex_request unused;
  class drive_request hot,unused;
  class is_rate_limit_error unused;
  class extract_retry_after unused;
  class calculate_retry_delay unused;
  class handle_429_with_backoff unused;
  class vertex_model_bucket unused;
  class sort_model_options unused;
  class to_model_options unused;
  class create_model_label unused;
  class cascade_model_discovery unused;
  class fetch_fresh_publisher_models unused;
  class get_static_model_list unused;
  class fetch_publisher_models unused;
  class error_handler unused;
  class dynamic_model_picklist unused;
  class picklist_for unused;
  class static_model_options unused;
  class build_conversation_payload unused;
  class build_message_parts unused;
  class build_classify_payload unused;
  class payload_for_analyze_image unused;
  class build_image_payload unused;
  class build_embedding_payload unused;
  class payload_for_text_embedding unused;
  class build_neighbors_payload unused;
  class payload_for_find_neighbors unused;
  class usage_meta unused;
  class standard_error_response unused;
  class get_export_mime_type unused;
  class classify_drive_change unused;
  class probe_vertex_ai unused;
  class sample_record_output unused;
  class safety_ratings_output_sample unused;
  class usage_output_sample unused;
  class format_parse_sample cycle,unused;</pre>
  </main>
</body>
</html>
